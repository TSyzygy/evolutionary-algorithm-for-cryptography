<!DOCTYPE html>
<html lang="en">
  <!-- copyright Thomas Simpson, Oct 2020 -->
  <head>
    <title>Evolutionary Algorithm for Cryptography</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="evolution, evolutionary, algorithm, cryptography, decrypt, decryption, cipher, solve, genetic">
    <meta name="description" content="A web-based evolutionary algorithm for decrypting ciphers, written in Javascript. A variety of ciphers are supported and it is fully customisable.">
    <meta name="author" content="TSyzygy">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<base href="">-->
    <link rel="stylesheet" href="colours.css">
    <link rel="stylesheet" href="dist/style.css">
    <link rel="stylesheet" href="fonts/fonts.css">
  </head>
  <body>

    <div id="page">


      <div id="sidebar" class="open">
        <section>
          <button id="close-sidebar">&times;</button>
          <h1>Evolutionary Algorithm for Cryptography</h1>
          <button type="button" id="open-add-population-modal">&plus;</button>
          <h4>Populations:</h4>
          <p id="no-populations-message">No populations</p>
          <div id="population-buttons">
            <!--
              <button type="button">Population 1</button>
              <button type="button" class="open">Population 2</button>
              <button type="button">Population 3</button>
              <button type="button">Population 4</button>
              <button type="button">Population 5</button>
              <button type="button">Population 6</button>
            -->
          </div>
        </section>
      </div>


      <div id="main">
        
        <!-- status bar at top -->
        <section id="top">
          <div id="open-sidebar-container">
            <button id="open-sidebar">Menu</button>
          </div>
          <div id="status">
            <h4>Status</h3>
          </div>
        </section>

        <!-- template for population pages -->
        <template id="population-page-template">
          <section>
            <div class="population-page">
              <div class="info">
                <h2 class="name"></h2>
                <p class="description"></p>
                <div class="controls" data-state="stopped">
                  <button type="button" class="run">Run &rtrif;</button>
                  <button type="button" class="stop">Stop &squ;</button>
                  <button type="button" class="step">Step &plus;</button>
                </div>
              </div>
              <div class="best-candidate">
                <p>Key: <code class="best-key"></code></p>
                <p>Score: <code class="best-score"></code></p>
                <p>Decryption: <code class="best-decryption"></code></p>
              </div>
            </div>
          </section>
        </template>

        <div id="population-pages">
          <!--
            <section>
            <div>
              <h2>Population 1</h2>
              <p>Some information!</p>
            </div>
            </section>
            <section class="open">
              <div>
                <h2>Population 2</h2>
                <p>Some information!</p>
              </div>
            </section>
            <section>
              <div>
                <h2>Population 3</h2>
                <p>Some information!</p>
              </div>
            </section>
            <section>
              <div>
                <h2>Population 4</h2>
                <p>Some information!</p>
              </div>
            </section>
            <section>
              <div>
                <h2>Population 5</h2>
                <p>Some information!</p>
              </div>
            </section>
          -->
        </div>

      </div>


    </div>


    <section id="add-population-modal" class="modal">
      <div>
        <div>

          <form id="add-population-form" name="new-population-form" autocomplete="off" autocapitalize="words" onsubmit="return false">

            <header>
              <button type="reset" id="close-add-population-modal">&times;</button>
              <h4>Add population</h4>
            </header>

            <div id="add-population-main">
              <div id="add-population-menu" class="modal-page open">
                <h5>Create population from blank</h5>
                <div id="create-population">
                  <button type="button" id="open-new-population-menu">New population &rarr;</button><br>
                  <button type="button" disabled>New populations in bulk &rarr;</button>
                </div>
                <h5>Import population</h5>
                <div id="import-population">
                  <div id="population-from-file">
                    <label for="population-file-import">From file: </label>
                    <input type="file" id="population-file-import" accept=".json">
                    <button type="button" disabled>Next &rarr;</button>
                  </div>
                  <div id="population-from-text">
                    <label for="population-text-input">From text: </label>
                    <input type="text" id="population-text-input" class="monospace">
                    <button type="button" disabled>Next &rarr;</button>
                  </div>
                </div>
              </div>
    
              <div id="new-population-menu" class="modal-page">
                <h5>Population info</h5>
                <div>
                  <div class="data-entry">
                    <label for="population-name-input">Name: </label><input type="text" id="population-name-input" name="name" maxlength="32" required>
                  </div>
                  <div class="data-entry">
                    <label for="population-description-input">Description (optional):</label><input type="text" id="population-description-input" name="description" autocapitalize="sentences" maxLength="256" rows="2">
                  </div>
                </div>
                
                <h5>Algorithm options</h5>
                <div id="algorithm-options">
                  <div class="data-entry">
                    <label for="population-size">Population size: </label>
                    <input type="number" id="population-size" name="population-size" max="1000" min="1" value="20" required>
                  </div>
                  <div class="data-entry">
                    <label for="children-per-parent">Children per parent: </label>
                    <input type="number" id="children-per-parent" name="children-per-parent" max="20" min="1" value="2" required>
                  </div>
                  <div class="data-entry">
                    <label for="random-per-generation">Random per generation: </label>
                    <input type="number" id="random-per-generation" name="random-per-generation" max="500" min="1" value="5" required>
                  </div>
                  <div class="data-entry">
                    <label for="duplicates-allowed">Duplicates allowed? </label>
                    <input type="checkbox" id="duplicates-allowed" name="duplicates-allowed">
                  </div>
                </div>

                <h5>Message(s) for decryption</h5>
                <div id="messages-for-decryption">
                  <p>Enter up to 12 messages. The algorithm will search for a decryption which applies best to all of them. If they are encrypted in different ways, a separate population must be made for each message.</p>
                  <div>
                    <div id="messages">
                      <div>
                        <input type="text" placeholder="message" class="monospace" required>
                        <p><span class="monospace">0000</span> chars</p>
                      </div>
                    </div>
                    <button type="button" id="add-message">&plus; Add message</button>
                    <template id="message-input-template">
                      <div>
                        <input type="text" placeholder="message" class="monospace" required>
                        <button type="button">&times;</button>
                        <p><span class="monospace">0000</span> chars</p>
                      </div>
                    </template>
                  </div>
                </div>

                <h5>Cipher options</h5>
                <div id="cipher-options">
                  <div id="cipher-choices"  class="data-entry">
                    <label for="cipher-name">Cipher type:</label>
                    <select id="cipher-name" name="cipher-name" required>
                      <option value="">Choose cipher...</option>
                      <option value="vigenere">Vigenere</option>
                      <option value="transposition">Transposition</option>
                    </select>
                  </div>
                  <div id="cipher-specific-options">
                    <div data-cipher-name="vigenere">
                      <div class="data-entry">
                        <label for="vigenere-keylength">Keylength:</label>
                        <input type="number" name="keylength" class="required-for-cipher" max="100" min="2" value="8">
                      </div>
                      <div class="data-entry">
                        <label for="n">Fitness evaluation method:</label>
                        <select name="n" class="required-for-cipher">
                          <option value="">Select fitness method...</option>
                          <option value="1">Letter frequencies (fastest)</option>
                          <option value="2">Bigram score</option>
                          <option value="3">Trigram score</option>
                          <option value="4">Quadgram score (most reliable)</option>
                        </select>
                      </div>
                    </div>
                    <div data-cipher-name="transposition">
                      <p>The transposition cipher is not yet implemented, sorry.</p>
                    </div>
                  </div>
                </div>

                <button type="submit" id="add-population-submit">Create population &rarr;</button>
              </div>
            </div>

            <footer>
              <button type="button" id="population-modal-back-button" disabled>&larr; Back</button>
            </footer>

          </form>
          
        </div>
      </div>
    </section>

    <script src="functionality-checks.js"></script>
    <script src="evolution-control.js"></script>
    <script src="assets.js"></script>
    <script src="interface.js"></script>

  </body>
</html>
